<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>hydra « Pei LiPing's Blog</title>
  <meta name="description" content="之前写过一篇关于netty的blog，经过几次梳理，hydra项目的代码基本稳定了。">

  <link rel="stylesheet" href="/blog/css/main.css">
  <link rel="canonical" href="http://peiliping.github.io/blog/archivers/2020-03-18-hydra">
  <link rel="alternate" type="application/rss+xml" title="Pei LiPing's Blog" href="http://peiliping.github.io/blog/feed.xml" />
</head>


  <body>

    <header class="header">
  <div class="wrapper">
    <a class="site-title" href="/blog/">Pei LiPing's Blog</a>
    <nav class="site-nav">
      
        
      
        
        <a class="page-link" href="/blog/about/">About</a>
        
      
        
        <a class="page-link" href="/blog/category/">Category</a>
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    </nav>
  </div>
</header>

    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">hydra</h1>
    <p class="post-meta">Mar 18, 2020</p>
  </header>

  <article class="post-content">
    <p>之前写过一篇关于netty的blog，经过几次梳理，hydra项目的代码基本稳定了。</p>

<p>hydra项目分为client和server两部分。</p>

<h2 id="client">client</h2>

<p>client用于weboscket的功能和性能测试，短时间可以轻松建立50000个连接。</p>

<p>可以通过参数指定subscribe的字符串，也可以定期发送指令维持heartbeat。</p>

<p>如果server返回的数据是gzip压缩的binary数据，也是支持解压缩的。</p>

<p>我尝试用client订阅了huobi的行情数据，配置启动参数就可以完成。其他同类网站也是没有问题的。</p>

<p>当然不要用它来对别人的网站进行压力测试，会被封IP的。</p>

<h2 id="server">server</h2>

<p>server主要是一个推送服务的基础框架。</p>

<p>推送的消息来源是从redis的topic中拉去的，采用redission的client。</p>

<p>从消息中提取部分字段信息，构建nameSpace，通过ChannelManager进行推送。</p>

<p>推送的消息格式，目前只支持text，未来需要考虑支持binary的压缩格式。</p>

<p>除了以nameSpace为基础的推送外，还实现了基于Uid的推送模式，之前的blog已经介绍过原理了。</p>

<h2 id="section">总结</h2>

<p>websocket推送可以应用的领域非常广，弹幕、聊天室、股票行情软件等等。</p>

<p>基于hydra的基础，后面要尝试一下netty的优化实践。</p>

  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="//www.gravatar.com/avatar/your_email_md5?d=mm&s=135" alt="Pei LiPing">
  <div class="col-box-title name">Pei LiPing</div>
  <p>The Cabin Of Pei LiPing.</p>
  <p class="contact">
    
    
    
    <a href="mailto:peilipingplp@gmail.com">Email</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">Newest Posts</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/blog/archivers/2021-01-19-master">Master选举</a></li>
    
      <li><a class="post-link" href="/blog/archivers/2020-12-30-summary">2020年总结</a></li>
    
      <li><a class="post-link" href="/blog/archivers/2020-11-19-doublestreaming">double streaming 2</a></li>
    
      <li><a class="post-link" href="/blog/archivers/2020-10-14-doublestreaming">double streaming</a></li>
    
      <li><a class="post-link" href="/blog/archivers/2020-09-27-transaction">transaction</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">TOC</div>
</div>
        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
&copy; 2016 Pei LiPing
</div>
</footer>

<script src="//upcdn.b0.upaiyun.com/libs/jquery/jquery-1.9.0.min.js"></script>
<script src="/blog/js/easybook.js"></script>

  </body>

</html>
