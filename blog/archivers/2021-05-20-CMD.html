<!DOCTYPE html>
<html>

  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>CMD « Pei LiPing's Blog</title>
  <meta name="description" content="使用linux的命令时，经常会用man来查询可选参数及其含义。偶尔我们也会开发自己的小工具。">

  <link rel="stylesheet" href="/blog/css/main.css">
  <link rel="canonical" href="http://peiliping.github.io/blog/archivers/2021-05-20-CMD">
  <link rel="alternate" type="application/rss+xml" title="Pei LiPing's Blog" href="http://peiliping.github.io/blog/feed.xml">
</head>


  <body>

    <header class="header">
  <div class="wrapper">
    <a class="site-title" href="/blog/">Pei LiPing's Blog</a>
    <nav class="site-nav">
      
        
      
        
        <a class="page-link" href="/blog/about/">About</a>
        
      
        
        <a class="page-link" href="/blog/category/">Category</a>
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    </nav>
  </div>
</header>

    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">CMD</h1>
    <p class="post-meta">May 20, 2021</p>
  </header>

  <article class="post-content">
    <p>使用linux的命令时，经常会用man来查询可选参数及其含义。偶尔我们也会开发自己的小工具。</p>

<p>如何给小工具快速添加可选参数呢？</p>

<h2 id="java">java</h2>

<p>java的开发者应该是更喜欢使用配置文件的方式来与程序交互，无论是property还是yml。</p>

<p>在参数不是特别多时，cmd的params也是不错的选择。提到给java传参数，大多数人一定是会</p>

<p>想到main函数的args数组，这是基础，但不太方便。</p>

<p>推荐使用commons-cli，能够设定长短参数(-i 或 –interval)，还能添加注解。</p>

<p>具体的方法我就不展开讲了，网上能搜到很多。</p>

<h2 id="getopts">getopt(s)</h2>

<p>shell中最普遍的解决办法就是getopt，配合while case处理输入的参数。</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>while getopts 'h:j:m:u' OPT;do
    case $OPTin
        j) S_DIR="$OPTARG";;
        m) D_DIR="$OPTARG";;
        u) upload="true";;
        h) func;;
        ?) func;;
    esac
done
</code></pre>
</div>

<p>如何你想实现tab自动提示的话，可以了解一下_get_comp_words_by_ref。</p>

<h2 id="shell">shell默认的参数处理</h2>

<div class="highlighter-rouge">
<pre class="highlight"><code>
$0 : 脚本名
$N : 第N个参数.
$# : 参数的个数，不包括命令本身.
$@ : 参数本身的列表，也不包括命令本身，如上例为 -v -f -out /test.log –prefix=/home
$* : 参数本身的列表，也不包括命令本身，但”$*” 和”\$@”(加引号)并不同，”$*“将所有的参数解释成一个字符串，而”$@”是一个参数数组。

</code></pre>
</div>

<p>这种处理方法没有getopt简洁，一般还是推荐使用getopt。但是下面这个特殊用法需要注意一下。</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>
"${@:2}"  从第二参数开始往后的所有参数

</code></pre>
</div>

  </article>
  
  




</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="//www.gravatar.com/avatar/your_email_md5?d=mm&amp;s=135" alt="Pei LiPing">
  <div class="col-box-title name">Pei LiPing</div>
  <p>The Cabin Of Pei LiPing.</p>
  <p class="contact">
    
    
    
    <a href="mailto:peilipingplp@gmail.com">Email</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">Newest Posts</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/blog/archivers/2021-10-10-baby">Baby</a></li>
    
      <li><a class="post-link" href="/blog/archivers/2021-08-19-wyckoff">Wyckoff</a></li>
    
      <li><a class="post-link" href="/blog/archivers/2021-07-28-writefile">write file</a></li>
    
      <li><a class="post-link" href="/blog/archivers/2021-06-13-flock">flock</a></li>
    
      <li><a class="post-link" href="/blog/archivers/2021-05-20-CMD">CMD</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">TOC</div>
</div>
        </div>
      </div>
    </div>

    <footer class="footer">
<div class="wrapper">
© 2016 Pei LiPing
</div>
</footer>

<script src="//upcdn.b0.upaiyun.com/libs/jquery/jquery-1.9.0.min.js"></script>
<script src="/blog/js/easybook.js"></script>

  </body>

</html>
